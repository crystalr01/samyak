[{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\App.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\App.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\components\\Dashboard.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\components\\Sidebar.js","messages":[{"ruleId":"jsx-a11y/role-supports-aria-props","severity":1,"message":"The attribute aria-expanded is not supported by the role navigation. This role is implicit on the element nav.","line":97,"column":9,"nodeType":"JSXOpeningElement","endLine":101,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from \"react\";\nimport { FiMenu, FiX } from \"react-icons/fi\";\n\nexport const menuItems = [\n    { id: 1, label: \"Home\", icon: \"≡ƒÅá\", path: \"/\" },\n    { id: 6, label: \"Registration\", icon: \"≡ƒô¥\", path: \"/registration\" },\n];\n\n\nfunction Sidebar({ activeMenu, setActiveMenu, isSidebarOpen, toggleSidebar }) {\n    useEffect(() => {\n        console.log(\"Sidebar component mounted with FiMenu/FiX icons\");\n    }, []);\n\n    const sidebarStyle = {\n        background: \"linear-gradient(135deg, #6a11cb 0%, #2575fc 100%)\",\n        color: \"white\",\n        flex: `0 0 ${isSidebarOpen ? \"250px\" : \"60px\"}`,\n        display: \"flex\",\n        flexDirection: \"column\",\n        padding: isSidebarOpen ? 20 : \"20px 10px\",\n        boxSizing: \"border-box\",\n        transition: \"flex 0.3s ease, padding 0.3s ease\",\n    };\n\n    const sidebarHeaderStyle = {\n        fontSize: isSidebarOpen ? \"1.8rem\" : \"0\",\n        fontWeight: \"700\",\n        marginBottom: isSidebarOpen ? 30 : 10,\n        letterSpacing: 2,\n        textAlign: \"center\",\n        userSelect: \"none\",\n        textShadow: \"1px 1px 3px rgba(0,0,0,0.3)\",\n        visibility: isSidebarOpen ? \"visible\" : \"hidden\",\n    };\n\n    const menuItemStyle = (isActive) => ({\n        display: \"flex\",\n        alignItems: \"center\",\n        padding: isSidebarOpen ? \"12px 15px\" : \"12px 10px\",\n        marginBottom: 12,\n        backgroundColor: isActive ? \"rgba(255, 255, 255, 0.4)\" : \"transparent\",\n        borderRadius: 8,\n        cursor: \"pointer\",\n        transition: \"background-color 0.3s ease, padding 0.3s ease\",\n        fontWeight: isActive ? \"700\" : \"normal\",\n        boxShadow: isActive ? \"0 0 8px rgba(255,255,255,0.7)\" : \"none\",\n        userSelect: \"none\",\n        fontSize: isSidebarOpen ? \"1.1rem\" : \"0\",\n        justifyContent: isSidebarOpen ? \"flex-start\" : \"center\",\n    });\n\n    const menuIconStyle = {\n        marginRight: isSidebarOpen ? 12 : 0,\n        fontSize: \"1.3rem\",\n    };\n\n    const toggleButtonStyle = {\n        alignSelf: \"flex-end\",\n        background: \"rgba(255, 255, 255, 0.3)\",\n        color: \"white\",\n        border: \"none\",\n        borderRadius: \"50%\",\n        padding: 10,\n        cursor: \"pointer\",\n        marginBottom: 20,\n        fontSize: \"1.5rem\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        boxShadow: \"0 2px 5px rgba(0,0,0,0.2)\",\n        transition: \"background-color 0.2s ease, transform 0.2s ease\",\n    };\n\n    const toggleButtonHoverStyle = {\n        background: \"rgba(255, 255, 255, 0.5)\",\n        transform: \"scale(1.1)\",\n    };\n\n    // We're just going to use the setActiveMenu function passed from App.js\n    // which now includes navigation logic\n    const handleMenuClick = (item) => {\n        setActiveMenu(item.label);\n        if (item.label === \"Logout\") {\n            alert(\"Logging out...\");\n            localStorage.removeItem('matrimonyUserPhone');\n            setActiveMenu(\"Login\");\n        } else {\n            // Use the provided path\n            window.history.pushState({}, \"\", item.path);\n            const navEvent = new PopStateEvent(\"popstate\");\n            window.dispatchEvent(navEvent);\n        }\n    };\n\n    return (\n        <nav\n            style={sidebarStyle}\n            aria-label=\"Sidebar navigation with matrimony menu items\"\n            aria-expanded={isSidebarOpen}\n        >\n            <button\n                style={toggleButtonStyle}\n                onClick={toggleSidebar}\n                onMouseEnter={(e) => {\n                    e.currentTarget.style.background = toggleButtonHoverStyle.background;\n                    e.currentTarget.style.transform = toggleButtonHoverStyle.transform;\n                }}\n                onMouseLeave={(e) => {\n                    e.currentTarget.style.background = toggleButtonStyle.background;\n                    e.currentTarget.style.transform = \"scale(1)\";\n                }}\n                aria-label={isSidebarOpen ? \"Close sidebar\" : \"Open sidebar\"}\n            >\n                {isSidebarOpen ? <FiX /> : <FiMenu />}\n            </button>\n            <div style={sidebarHeaderStyle}>Matrimony</div>\n            {menuItems.map((item) => (\n                <div\n                    key={item.id}\n                    style={menuItemStyle(activeMenu === item.label)}\n                    onClick={() => handleMenuClick(item)}\n                    role=\"button\"\n                    tabIndex={0}\n                >\n                    <span style={menuIconStyle} aria-hidden=\"true\">\n                        {item.icon}\n                    </span>\n                    {isSidebarOpen && <span>{item.label}</span>}\n                </div>\n            ))}\n\n        </nav>\n    );\n}\n\nexport default Sidebar;","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\components\\pages\\Edit.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'set' is defined but never used.","line":2,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":31},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchUserData'. Either include it or remove the dependency array.","line":40,"column":8,"nodeType":"ArrayExpression","endLine":40,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchUserData, userId]","fix":{"range":[1756,1764],"text":"[fetchUserData, userId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from \"react\";\nimport { getDatabase, ref, set, get, update } from \"firebase/database\";\nimport { getStorage, ref as storageRef, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { useParams, useNavigate } from \"react-router-dom\";\n\nfunction Edit() {\n    const { userId } = useParams();\n    const navigate = useNavigate();\n    const [loading, setLoading] = useState(true);\n    const [userData, setUserData] = useState(null);\n    const [biodataImage, setBiodataImage] = useState(null);\n    const [userImages, setUserImages] = useState([]);\n    const [dragOver, setDragOver] = useState({ biodata: false, photos: false });\n    const [uploadProgress, setUploadProgress] = useState({ biodata: 0, photos: 0 });\n    const [uploading, setUploading] = useState({ biodata: false, photos: false });\n    const [uploadStatus, setUploadStatus] = useState(\"\");\n    const [currentFile, setCurrentFile] = useState(\"\");\n    const [errors, setErrors] = useState([]);\n    const [autoSaving, setAutoSaving] = useState(false);\n\n    const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n    const [isTablet, setIsTablet] = useState(window.innerWidth >= 768 && window.innerWidth < 1200);\n\n    const biodataFileInputRef = useRef(null);\n    const photosFileInputRef = useRef(null);\n\n    useEffect(() => {\n        const handleResize = () => {\n            setIsMobile(window.innerWidth < 768);\n            setIsTablet(window.innerWidth >= 768 && window.innerWidth < 1200);\n        };\n        window.addEventListener(\"resize\", handleResize);\n        return () => window.removeEventListener(\"resize\", handleResize);\n    }, []);\n\n    useEffect(() => {\n        if (userId) {\n            fetchUserData();\n        }\n    }, [userId]);\n\n    // Enhanced function to validate Firebase Storage URLs\n    const isValidFirebaseStorageUrl = (url) => {\n        if (!url || typeof url !== 'string') return false;\n\n        // Check if it's a valid Firebase Storage URL - Using RegExp constructor to avoid escape character issues with /\n        const firebaseStoragePattern = new RegExp('^https://firebasestorage\\\\.googleapis\\\\.com/v0/b/[^/]+/o/.+');\n        const firebaseStoragePattern2 = new RegExp('^https://storage\\\\.googleapis\\\\.com/[^/]+/.+');\n\n        return firebaseStoragePattern.test(url) || firebaseStoragePattern2.test(url);\n    };\n\n    const fetchUserData = async () => {\n        try {\n            setLoading(true);\n            const db = getDatabase();\n            const userRef = ref(db, `Matrimony/users/${userId}`);\n            const snapshot = await get(userRef);\n\n            if (snapshot.exists()) {\n                const data = snapshot.val();\n                setUserData(data);\n\n                // Only load biodata image if it's from Firebase Storage\n                if (data.biodata && isValidFirebaseStorageUrl(data.biodata)) {\n                    setBiodataImage(data.biodata);\n                }\n\n                // Only load photos if they're from Firebase Storage\n                if (data.photos && Array.isArray(data.photos) && data.photos.length > 0) {\n                    const photosString = data.photos[0];\n                    if (typeof photosString === 'string' && photosString.includes(',')) {\n                        const photosArray = photosString\n                            .split(',')\n                            .map(url => url.trim())\n                            .filter(url => url && isValidFirebaseStorageUrl(url));\n                        setUserImages(photosArray);\n                    } else if (Array.isArray(data.photos)) {\n                        const validPhotos = data.photos.filter(url => isValidFirebaseStorageUrl(url));\n                        setUserImages(validPhotos);\n                    }\n                }\n            } else {\n                alert(\"User not found!\");\n                navigate('/');\n            }\n        } catch (error) {\n            console.error(\"Error fetching user data:\", error);\n            alert(\"Error loading user data\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // Auto-save function that updates database immediately\n    const autoSaveToDatabase = async (type, newImageData) => {\n        try {\n            setAutoSaving(true);\n            const db = getDatabase();\n            const userRef = ref(db, `Matrimony/users/${userId}`);\n\n            const updates = {};\n\n            if (type === 'biodata') {\n                updates.biodata = newImageData;\n            } else if (type === 'photos') {\n                if (newImageData.length > 0) {\n                    updates.photos = [newImageData.join(',')];\n                } else {\n                    updates.photos = [];\n                }\n            }\n\n            await update(userRef, updates);\n\n            setUploadStatus(`Γ£à ${type === 'biodata' ? 'Biodata image' : 'Photos'} saved successfully!`);\n            setTimeout(() => {\n                setUploadStatus(\"\");\n            }, 3000);\n\n        } catch (error) {\n            console.error(\"Error auto-saving to database:\", error);\n            setErrors([`Failed to save ${type} to database. Please try again.`]);\n            setTimeout(() => setErrors([]), 5000);\n        } finally {\n            setAutoSaving(false);\n        }\n    };\n\n    const handleFileUpload = async (files, type) => {\n        if (!files || files.length === 0) return;\n\n        const storage = getStorage();\n        const uploadedUrls = [];\n        const uploadErrors = [];\n\n        try {\n            setUploading(prev => ({ ...prev, [type]: true }));\n            setUploadProgress(prev => ({ ...prev, [type]: 0 }));\n            setErrors([]);\n            setUploadStatus(`≡ƒÜÇ Starting upload of ${files.length} file${files.length > 1 ? 's' : ''}...`);\n\n            for (let i = 0; i < files.length; i++) {\n                const file = files[i];\n                setCurrentFile(file.name);\n                setUploadStatus(`≡ƒôñ Uploading ${file.name}...`);\n\n                // Validate file type\n                if (!file.type.startsWith('image/')) {\n                    uploadErrors.push(`${file.name} is not an image file`);\n                    continue;\n                }\n\n                // Validate file size (max 5MB)\n                if (file.size > 5 * 1024 * 1024) {\n                    uploadErrors.push(`${file.name} is too large (max 5MB)`);\n                    continue;\n                }\n\n                try {\n                    // Create unique filename\n                    const timestamp = Date.now();\n                    const randomStr = Math.random().toString(36).substring(2, 8);\n                    const fileExtension = file.name.split('.').pop();\n                    const filename = `${timestamp}_${randomStr}.${fileExtension}`;\n\n                    // Create storage reference\n                    const folderPath = type === 'biodata' ? 'bio' : 'photos';\n                    const fileRef = storageRef(storage, `matrimony/${folderPath}/${filename}`);\n\n                    // Upload file\n                    setUploadStatus(`Γ¼å∩╕Å Uploading ${file.name} to Firebase Storage...`);\n                    const uploadResult = await uploadBytes(fileRef, file);\n                    const downloadURL = await getDownloadURL(uploadResult.ref);\n                    uploadedUrls.push(downloadURL);\n\n                    setUploadStatus(`Γ£à Successfully uploaded ${file.name}`);\n                } catch (fileError) {\n                    console.error(`Error uploading ${file.name}:`, fileError);\n                    uploadErrors.push(`Failed to upload ${file.name}`);\n                }\n\n                // Update progress\n                const progress = Math.round(((i + 1) / files.length) * 100);\n                setUploadProgress(prev => ({ ...prev, [type]: progress }));\n            }\n\n            // Auto-save to database immediately after upload\n            if (uploadedUrls.length > 0) {\n                setUploadStatus(`≡ƒÆ╛ Saving ${type} to database...`);\n\n                if (type === 'biodata') {\n                    setBiodataImage(uploadedUrls[0]);\n                    await autoSaveToDatabase('biodata', uploadedUrls[0]);\n                } else {\n                    const newPhotos = [...userImages, ...uploadedUrls];\n                    setUserImages(newPhotos);\n                    await autoSaveToDatabase('photos', newPhotos);\n                }\n            }\n\n            if (uploadErrors.length > 0) {\n                setErrors(uploadErrors);\n                setTimeout(() => setErrors([]), 8000);\n            }\n\n            return uploadedUrls;\n        } catch (error) {\n            console.error(\"Error uploading files:\", error);\n            setUploadStatus(\"Γ¥î Upload failed. Please try again.\");\n            setErrors([\"Upload failed. Please try again.\"]);\n            setTimeout(() => {\n                setUploadStatus(\"\");\n                setErrors([]);\n            }, 5000);\n            return [];\n        } finally {\n            setUploading(prev => ({ ...prev, [type]: false }));\n            setCurrentFile(\"\");\n            setTimeout(() => {\n                setUploadProgress(prev => ({ ...prev, [type]: 0 }));\n            }, 3000);\n        }\n    };\n\n    const handleBiodataUpload = async (files) => {\n        if (files.length > 1) {\n            setErrors([\"Please select only one biodata image\"]);\n            setTimeout(() => setErrors([]), 3000);\n            return;\n        }\n\n        await handleFileUpload(files, 'biodata');\n    };\n\n    const handlePhotosUpload = async (files) => {\n        if (userImages.length + files.length > 10) {\n            setErrors([`You can only have maximum 10 photos. Currently you have ${userImages.length} photos.`]);\n            setTimeout(() => setErrors([]), 3000);\n            return;\n        }\n\n        await handleFileUpload(files, 'photos');\n    };\n\n    const handleDragOver = (e, type) => {\n        e.preventDefault();\n        setDragOver(prev => ({ ...prev, [type]: true }));\n    };\n\n    const handleDragLeave = (e, type) => {\n        e.preventDefault();\n        if (!e.currentTarget.contains(e.relatedTarget)) {\n            setDragOver(prev => ({ ...prev, [type]: false }));\n        }\n    };\n\n    const handleDrop = (e, type) => {\n        e.preventDefault();\n        setDragOver(prev => ({ ...prev, [type]: false }));\n\n        const files = Array.from(e.dataTransfer.files);\n        if (type === 'biodata') {\n            handleBiodataUpload(files);\n        } else {\n            handlePhotosUpload(files);\n        }\n    };\n\n    const handleFileSelect = (e, type) => {\n        const files = Array.from(e.target.files);\n        if (type === 'biodata') {\n            handleBiodataUpload(files);\n        } else {\n            handlePhotosUpload(files);\n        }\n        e.target.value = '';\n    };\n\n    const removeUserImage = async (index) => {\n        const newImages = userImages.filter((_, i) => i !== index);\n        setUserImages(newImages);\n        await autoSaveToDatabase('photos', newImages);\n    };\n\n    const removeBiodataImage = async () => {\n        setBiodataImage(null);\n        await autoSaveToDatabase('biodata', null);\n    };\n\n    // Styles\n    const pageStyle = {\n        padding: isMobile ? \"16px\" : isTablet ? \"24px\" : \"32px\",\n        background: \"linear-gradient(135deg, #c3dafe 0%, #e9d5ff 100%)\",\n        backgroundColor: \"#f8fafc\",\n        minHeight: \"100vh\",\n    };\n\n    const headerStyle = {\n        textAlign: \"center\",\n        margin: \"0 0 32px 0\",\n        padding: isMobile ? \"12px 0\" : \"16px 0\",\n    };\n\n    const titleStyle = {\n        fontSize: isMobile ? \"1.5rem\" : isTablet ? \"1.8rem\" : \"2rem\",\n        fontWeight: \"800\",\n        color: \"#7c3aed\",\n        margin: 0,\n        lineHeight: 1.2,\n    };\n\n    const sectionStyle = {\n        backgroundColor: \"#ffffff\",\n        borderRadius: \"16px\",\n        padding: isMobile ? \"20px\" : \"32px\",\n        margin: \"24px 0\",\n        boxShadow: \"0 8px 24px rgba(0, 0, 0, 0.08)\",\n        border: \"1px solid #d8b4fe\",\n    };\n\n    const sectionTitleStyle = {\n        fontSize: isMobile ? \"1.2rem\" : \"1.4rem\",\n        fontWeight: \"700\",\n        color: \"#1e293b\",\n        margin: \"0 0 20px 0\",\n        display: \"flex\",\n        alignItems: \"center\",\n        gap: \"8px\",\n    };\n\n    const dropZoneStyle = (isDragOver, isUploading) => ({\n        border: `3px dashed ${isDragOver ? '#7c3aed' : isUploading ? '#f59e0b' : '#d1d5db'}`,\n        borderRadius: \"12px\",\n        padding: isMobile ? \"24px 16px\" : \"40px 24px\",\n        textAlign: \"center\",\n        backgroundColor: isDragOver ? \"rgba(124, 58, 237, 0.05)\" : isUploading ? \"rgba(245, 158, 11, 0.05)\" : \"#f9fafb\",\n        cursor: isUploading ? \"not-allowed\" : \"pointer\",\n        transition: \"all 0.3s ease\",\n        margin: \"16px 0\",\n        opacity: isUploading ? 0.7 : 1,\n    });\n\n    const dropZoneTextStyle = {\n        fontSize: isMobile ? \"0.9rem\" : \"1rem\",\n        color: \"#6b7280\",\n        margin: \"8px 0\",\n    };\n\n    const imagePreviewContainerStyle = {\n        display: \"grid\",\n        gridTemplateColumns: isMobile ? \"1fr 1fr\" : \"repeat(auto-fill, minmax(150px, 1fr))\",\n        gap: \"16px\",\n        margin: \"20px 0\",\n    };\n\n    const imagePreviewStyle = {\n        position: \"relative\",\n        borderRadius: \"8px\",\n        overflow: \"hidden\",\n        border: \"2px solid #e5e7eb\",\n        aspectRatio: \"1\",\n    };\n\n    const imageStyle = {\n        width: \"100%\",\n        height: \"100%\",\n        objectFit: \"cover\",\n    };\n\n    const removeButtonStyle = {\n        position: \"absolute\",\n        top: \"8px\",\n        right: \"8px\",\n        backgroundColor: \"#ef4444\",\n        color: \"white\",\n        border: \"none\",\n        borderRadius: \"50%\",\n        width: \"24px\",\n        height: \"24px\",\n        cursor: \"pointer\",\n        fontSize: \"12px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        transition: \"all 0.2s ease\",\n    };\n\n    const backButtonStyle = {\n        padding: isMobile ? \"12px 20px\" : \"14px 28px\",\n        background: \"linear-gradient(90deg, #6b7280 0%, #4b5563 100%)\",\n        color: \"#ffffff\",\n        border: \"none\",\n        borderRadius: \"10px\",\n        fontWeight: \"600\",\n        fontSize: isMobile ? \"0.9rem\" : \"1rem\",\n        cursor: \"pointer\",\n        transition: \"all 0.3s ease\",\n        margin: \"32px auto\",\n        display: \"block\",\n    };\n\n    const selectButtonStyle = {\n        padding: isMobile ? \"8px 16px\" : \"10px 20px\",\n        background: \"linear-gradient(90deg, #059669 0%, #047857 100%)\",\n        color: \"#ffffff\",\n        border: \"none\",\n        borderRadius: \"8px\",\n        fontWeight: \"600\",\n        fontSize: isMobile ? \"0.85rem\" : \"0.9rem\",\n        cursor: \"pointer\",\n        transition: \"all 0.3s ease\",\n    };\n\n    const progressDialogStyle = {\n        position: \"fixed\",\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: \"rgba(0, 0, 0, 0.7)\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        zIndex: 1000,\n    };\n\n    const progressContentStyle = {\n        backgroundColor: \"#ffffff\",\n        padding: \"40px\",\n        borderRadius: \"20px\",\n        textAlign: \"center\",\n        maxWidth: \"500px\",\n        width: \"90%\",\n        boxShadow: \"0 25px 50px rgba(0, 0, 0, 0.25)\",\n        border: \"1px solid #e5e7eb\",\n    };\n\n    const progressBarStyle = {\n        width: \"100%\",\n        height: \"12px\",\n        backgroundColor: \"#e5e7eb\",\n        borderRadius: \"6px\",\n        overflow: \"hidden\",\n        margin: \"20px 0\",\n    };\n\n    const progressFillStyle = (progress) => ({\n        width: `${progress}%`,\n        height: \"100%\",\n        background: \"linear-gradient(90deg, #7c3aed 0%, #db2777 100%)\",\n        transition: \"width 0.3s ease\",\n        borderRadius: \"6px\",\n    });\n\n    const errorStyle = {\n        backgroundColor: \"#fee2e2\",\n        border: \"1px solid #fecaca\",\n        borderRadius: \"12px\",\n        padding: \"16px 20px\",\n        margin: \"16px 0\",\n        color: \"#dc2626\",\n        fontSize: isMobile ? \"0.9rem\" : \"1rem\",\n        fontWeight: \"500\",\n    };\n\n    const statusStyle = {\n        backgroundColor: \"#dcfce7\",\n        border: \"1px solid #bbf7d0\",\n        borderRadius: \"12px\",\n        padding: \"16px 20px\",\n        margin: \"16px 0\",\n        color: \"#16a34a\",\n        fontSize: isMobile ? \"0.9rem\" : \"1rem\",\n        fontWeight: \"600\",\n    };\n\n    if (loading) {\n        return (\n            <div style={pageStyle}>\n                <div style={progressDialogStyle}>\n                    <div style={progressContentStyle}>\n                        <div style={{ fontSize: \"1.4rem\", marginBottom: \"20px\" }}>\n                            ≡ƒôè Loading User Data...\n                        </div>\n                        <div style={{ color: \"#6b7280\" }}>\n                            Please wait while we load the user information\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div style={pageStyle}>\n            {/* Enhanced Progress Dialog */}\n            {(uploading.biodata || uploading.photos || autoSaving) && (\n                <div style={progressDialogStyle}>\n                    <div style={progressContentStyle}>\n                        <div style={{ fontSize: \"1.5rem\", marginBottom: \"20px\" }}>\n                            {autoSaving ? \"≡ƒÆ╛ Auto-Saving...\" : \"≡ƒôñ Uploading & Saving...\"}\n                        </div>\n\n                        {!autoSaving && (\n                            <>\n                                <div style={progressBarStyle}>\n                                    <div style={progressFillStyle(uploading.biodata ? uploadProgress.biodata : uploadProgress.photos)}></div>\n                                </div>\n\n                                <div style={{ color: \"#6b7280\", marginBottom: \"12px\", fontSize: \"1.1rem\" }}>\n                                    {uploadProgress.biodata || uploadProgress.photos}% Complete\n                                </div>\n\n                                {currentFile && (\n                                    <div style={{ color: \"#374151\", fontWeight: \"600\", marginBottom: \"12px\" }}>\n                                        ≡ƒôü {currentFile}\n                                    </div>\n                                )}\n                            </>\n                        )}\n\n                        {uploadStatus && (\n                            <div style={{\n                                color: \"#374151\",\n                                fontWeight: \"500\",\n                                fontSize: \"1rem\",\n                                padding: \"12px\",\n                                backgroundColor: \"#f8fafc\",\n                                borderRadius: \"8px\",\n                                border: \"1px solid #e5e7eb\"\n                            }}>\n                                {uploadStatus}\n                            </div>\n                        )}\n\n                        {autoSaving && (\n                            <div style={{ color: \"#6b7280\", fontSize: \"1rem\" }}>\n                                Automatically saving to database...\n                            </div>\n                        )}\n                    </div>\n                </div>\n            )}\n\n            <div style={headerStyle}>\n                <h1 style={titleStyle}>≡ƒô╕ Update Photos</h1>\n                <p style={{ color: \"#6b7280\", margin: \"8px 0\", fontSize: \"1rem\" }}>\n                    {userData?.personal?.firstName} {userData?.personal?.lastName}\n                </p>\n                <p style={{ color: \"#059669\", margin: \"8px 0\", fontSize: \"0.9rem\", fontWeight: \"500\" }}>\n                    Γ£¿ Images are saved automatically after upload!\n                </p>\n            </div>\n\n            {/* Error Messages */}\n            {errors.length > 0 && (\n                <div>\n                    {errors.map((error, index) => (\n                        <div key={index} style={errorStyle}>\n                            ΓÜá∩╕Å {error}\n                        </div>\n                    ))}\n                </div>\n            )}\n\n            {/* Success Status */}\n            {uploadStatus && !uploading.biodata && !uploading.photos && !autoSaving && (\n                <div style={statusStyle}>\n                    {uploadStatus}\n                </div>\n            )}\n\n            {/* Biodata Image Section */}\n            <div style={sectionStyle}>\n                <h2 style={sectionTitleStyle}>\n                    ≡ƒôï Biodata Image\n                    <span style={{ fontSize: \"0.8rem\", color: \"#6b7280\", fontWeight: \"400\" }}>\n                        (Single image only - Auto-saved)\n                    </span>\n                </h2>\n\n                <div\n                    style={dropZoneStyle(dragOver.biodata, uploading.biodata)}\n                    onDragOver={(e) => handleDragOver(e, 'biodata')}\n                    onDragLeave={(e) => handleDragLeave(e, 'biodata')}\n                    onDrop={(e) => handleDrop(e, 'biodata')}\n                    onClick={() => !uploading.biodata && biodataFileInputRef.current?.click()}\n                >\n                    <div style={{ fontSize: isMobile ? \"2.5rem\" : \"4rem\", marginBottom: \"16px\" }}>\n                        {uploading.biodata ? \"ΓÅ│\" : \"≡ƒôï\"}\n                    </div>\n                    <div style={dropZoneTextStyle}>\n                        <strong>\n                            {uploading.biodata ? \"Uploading & saving biodata image...\" : \"Drop biodata image here\"}\n                        </strong>\n                    </div>\n                    {!uploading.biodata && (\n                        <>\n                            <div style={dropZoneTextStyle}>\n                                Images will be automatically saved to Firebase\n                            </div>\n                            <button style={selectButtonStyle} type=\"button\">\n                                ≡ƒôé Select Biodata Image\n                            </button>\n                        </>\n                    )}\n                </div>\n\n                <input\n                    ref={biodataFileInputRef}\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={(e) => handleFileSelect(e, 'biodata')}\n                    style={{ display: 'none' }}\n                    disabled={uploading.biodata}\n                />\n\n                {biodataImage && (\n                    <div style={{ margin: \"24px 0\" }}>\n                        <h3 style={{ fontSize: \"1.1rem\", color: \"#374151\", margin: \"0 0 16px 0\" }}>\n                            Γ£à Current Biodata Image (From Firebase):\n                        </h3>\n                        <div style={imagePreviewStyle}>\n                            <img src={biodataImage} alt=\"Biodata\" style={imageStyle} />\n                            <button\n                                style={removeButtonStyle}\n                                onClick={removeBiodataImage}\n                                title=\"Remove image\"\n                                disabled={uploading.biodata || autoSaving}\n                            >\n                                ├ù\n                            </button>\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            {/* User Photos Section */}\n            <div style={sectionStyle}>\n                <h2 style={sectionTitleStyle}>\n                    ≡ƒô╖ User Photos\n                    <span style={{ fontSize: \"0.8rem\", color: \"#6b7280\", fontWeight: \"400\" }}>\n                        (Multiple images - Max 10 - Auto-saved)\n                    </span>\n                </h2>\n\n                <div\n                    style={dropZoneStyle(dragOver.photos, uploading.photos)}\n                    onDragOver={(e) => handleDragOver(e, 'photos')}\n                    onDragLeave={(e) => handleDragLeave(e, 'photos')}\n                    onDrop={(e) => handleDrop(e, 'photos')}\n                    onClick={() => !uploading.photos && photosFileInputRef.current?.click()}\n                >\n                    <div style={{ fontSize: isMobile ? \"2.5rem\" : \"4rem\", marginBottom: \"16px\" }}>\n                        {uploading.photos ? \"ΓÅ│\" : \"≡ƒô╖\"}\n                    </div>\n                    <div style={dropZoneTextStyle}>\n                        <strong>\n                            {uploading.photos ? \"Uploading & saving user photos...\" : \"Drop user photos here\"}\n                        </strong>\n                    </div>\n                    {!uploading.photos && (\n                        <>\n                            <div style={dropZoneTextStyle}>\n                                Images will be automatically saved to Firebase\n                            </div>\n                            <button style={selectButtonStyle} type=\"button\">\n                                ≡ƒôé Select User Photos\n                            </button>\n                        </>\n                    )}\n                </div>\n\n                <input\n                    ref={photosFileInputRef}\n                    type=\"file\"\n                    accept=\"image/*\"\n                    multiple\n                    onChange={(e) => handleFileSelect(e, 'photos')}\n                    style={{ display: 'none' }}\n                    disabled={uploading.photos}\n                />\n\n                {userImages.length > 0 && (\n                    <div>\n                        <h3 style={{ fontSize: \"1.1rem\", color: \"#374151\", margin: \"24px 0 16px 0\" }}>\n                            Γ£à Current Photos ({userImages.length}/10) - From Firebase:\n                        </h3>\n                        <div style={imagePreviewContainerStyle}>\n                            {userImages.map((url, index) => (\n                                <div key={index} style={imagePreviewStyle}>\n                                    <img src={url} alt={`${index + 1}`} style={imageStyle} />\n                                    <button\n                                        style={removeButtonStyle}\n                                        onClick={() => removeUserImage(index)}\n                                        title=\"Remove image\"\n                                        disabled={uploading.photos || autoSaving}\n                                    >\n                                        ├ù\n                                    </button>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            {/* Back Button */}\n            <button\n                style={backButtonStyle}\n                onClick={() => navigate('/')}\n                disabled={uploading.biodata || uploading.photos || autoSaving}\n            >\n                ΓåÉ Back to Home\n            </button>\n        </div>\n    );\n}\n\nexport default Edit;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\components\\pages\\HomePage.js","messages":[{"ruleId":"no-use-before-define","severity":1,"message":"'fetchUsers' was used before it was defined.","line":180,"column":88,"nodeType":"Identifier","messageId":"usedBeforeDefined","endLine":180,"endColumn":98},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has an unnecessary dependency: 'pageKeys'. Either exclude it or remove the dependency array.","line":336,"column":8,"nodeType":"ArrayExpression","endLine":336,"endColumn":45,"suggestions":[{"desc":"Update the dependencies array to be: [currentPage, users.length]","fix":{"range":[14530,14567],"text":"[currentPage, users.length]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { getDatabase, ref, get, query, orderByKey, startAfter, limitToFirst, remove } from \"firebase/database\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\n\nfunction HomePage() {\n    const [users, setUsers] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [hasNextPage, setHasNextPage] = useState(true);\n    const [totalPagesDiscovered, setTotalPagesDiscovered] = useState(1);\n    const [loadingPage, setLoadingPage] = useState(null);\n    const [isDiscoveringPages, setIsDiscoveringPages] = useState(false);\n    const [estimatedTotalPages, setEstimatedTotalPages] = useState(null);\n    const [pageSearchValue, setPageSearchValue] = useState(\"\");\n    const [searchingPage, setSearchingPage] = useState(false);\n    const [totalUsers, setTotalUsers] = useState(0);\n\n    const [pageKeys, setPageKeys] = useState(() => {\n        const savedKeys = localStorage.getItem(\"matrimony_users_pageKeys\");\n        if (savedKeys) {\n            try {\n                const parsed = JSON.parse(savedKeys);\n                if (Array.isArray(parsed) && parsed.length > 0) return parsed;\n            } catch { }\n        }\n        return [null];\n    });\n\n    const [currentPage, setCurrentPage] = useState(() => {\n        const savedPage = localStorage.getItem(\"matrimony_users_page\");\n        return savedPage ? parseInt(savedPage, 10) : 0;\n    });\n\n    const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n    const [isTablet, setIsTablet] = useState(window.innerWidth >= 768 && window.innerWidth < 1200);\n    const navigate = useNavigate();\n    const location = useLocation();\n    const scrollPositionRef = useRef(0);\n    const isRestoringStateRef = useRef(false);\n\n    // Enhanced state restoration\n    useEffect(() => {\n        const handlePopState = (event) => {\n            // Prevent page reload on browser back navigation\n            isRestoringStateRef.current = true;\n            console.log(\"Pop state detected - preventing reload\");\n        };\n\n        window.addEventListener('popstate', handlePopState);\n        return () => window.removeEventListener('popstate', handlePopState);\n    }, []);\n\n    useEffect(() => {\n        const handleResize = () => {\n            setIsMobile(window.innerWidth < 768);\n            setIsTablet(window.innerWidth >= 768 && window.innerWidth < 1200);\n        };\n        window.addEventListener(\"resize\", handleResize);\n        return () => window.removeEventListener(\"resize\", handleResize);\n    }, []);\n\n    useEffect(() => {\n        const saveScrollPosition = () => {\n            scrollPositionRef.current = window.scrollY;\n            sessionStorage.setItem(\"matrimony_scroll_position\", window.scrollY.toString());\n        };\n\n        window.addEventListener(\"beforeunload\", saveScrollPosition);\n        return () => window.removeEventListener(\"beforeunload\", saveScrollPosition);\n    }, []);\n\n    // Enhanced state restoration logic\n    useEffect(() => {\n        const isComingFromDetails = sessionStorage.getItem(\"matrimony_returning_from_details\");\n        const wasNavigated = sessionStorage.getItem(\"matrimony_navigated\");\n\n        if (isComingFromDetails === \"true\" || wasNavigated === \"true\") {\n            console.log(\"Restoring state from navigation\");\n            isRestoringStateRef.current = true;\n\n            // Restore saved state\n            const savedPage = sessionStorage.getItem(\"matrimony_users_page\");\n            const savedKeys = sessionStorage.getItem(\"matrimony_users_pageKeys\");\n            const savedScrollPosition = sessionStorage.getItem(\"matrimony_scroll_position\");\n            const savedUsers = sessionStorage.getItem(\"matrimony_current_users\");\n            const savedTotalPages = sessionStorage.getItem(\"matrimony_total_pages\");\n            const savedEstimatedPages = sessionStorage.getItem(\"matrimony_estimated_pages\");\n            const savedTotalUsers = sessionStorage.getItem(\"matrimony_total_users\");\n\n            if (savedPage && savedKeys) {\n                const pageNum = parseInt(savedPage, 10);\n                const keys = JSON.parse(savedKeys);\n\n                // Restore state without triggering new fetch\n                setCurrentPage(pageNum);\n                setPageKeys(keys);\n\n                if (savedTotalPages) {\n                    setTotalPagesDiscovered(parseInt(savedTotalPages, 10));\n                }\n\n                if (savedEstimatedPages) {\n                    setEstimatedTotalPages(parseInt(savedEstimatedPages, 10));\n                }\n\n                if (savedTotalUsers) {\n                    setTotalUsers(parseInt(savedTotalUsers, 10));\n                }\n\n                // Restore users data if available\n                if (savedUsers) {\n                    try {\n                        const usersData = JSON.parse(savedUsers);\n                        setUsers(usersData);\n                        setLoading(false);\n                        console.log(\"Restored users from session storage\");\n                    } catch (error) {\n                        console.log(\"Error restoring users data, will fetch fresh\");\n                    }\n                }\n\n                // Restore scroll position\n                if (savedScrollPosition) {\n                    setTimeout(() => {\n                        window.scrollTo({\n                            top: parseInt(savedScrollPosition, 10),\n                            behavior: 'instant'\n                        });\n                        console.log(\"Restored scroll position\");\n                    }, 100);\n                }\n            }\n\n            // Clear navigation flags\n            sessionStorage.removeItem(\"matrimony_returning_from_details\");\n            sessionStorage.removeItem(\"matrimony_navigated\");\n\n            // Reset restoration flag after a delay\n            setTimeout(() => {\n                isRestoringStateRef.current = false;\n            }, 1000);\n        }\n    }, [location.pathname]);\n\n    useEffect(() => {\n        estimateTotalPages();\n    }, []);\n\n    // Modified useEffect to prevent unnecessary fetching\n    // Modified useEffect to handle pagination properly\n    useEffect(() => {\n        // Determine if we should fetch based on different conditions\n        const shouldFetch =\n            !isRestoringStateRef.current && (\n                users.length === 0 || // First load\n                loadingPage !== null || // Page navigation in progress\n                currentPage !== parseInt(sessionStorage.getItem(\"matrimony_users_page\") || \"0\", 10) // Page changed\n            );\n\n        if (shouldFetch) {\n            console.log(\"Fetching users for page\", currentPage);\n            fetchUsers(pageKeys[currentPage]);\n        }\n\n        // Always update storage for persistence\n        localStorage.setItem(\"matrimony_users_page\", currentPage.toString());\n        localStorage.setItem(\"matrimony_users_pageKeys\", JSON.stringify(pageKeys));\n\n        // Also update sessionStorage for immediate restoration\n        sessionStorage.setItem(\"matrimony_users_page\", currentPage.toString());\n        sessionStorage.setItem(\"matrimony_users_pageKeys\", JSON.stringify(pageKeys));\n        sessionStorage.setItem(\"matrimony_total_pages\", totalPagesDiscovered.toString());\n\n        if (estimatedTotalPages) {\n            sessionStorage.setItem(\"matrimony_estimated_pages\", estimatedTotalPages.toString());\n        }\n\n        if (currentPage + 1 > totalPagesDiscovered) {\n            setTotalPagesDiscovered(currentPage + 1);\n        }\n    }, [currentPage, pageKeys, totalPagesDiscovered, estimatedTotalPages, loadingPage, fetchUsers, users.length]);\n\n    // Save users data whenever it changes\n    useEffect(() => {\n        if (users.length > 0 && !isRestoringStateRef.current) {\n            sessionStorage.setItem(\"matrimony_current_users\", JSON.stringify(users));\n            console.log(\"Saved users to session storage\");\n        }\n    }, [users]);\n\n    const estimateTotalPages = async () => {\n        try {\n            // Optimization: Use shallow REST fetch to get only keys (much faster than fetching all data)\n            const dbUrl = \"https://scroller-4d10f-default-rtdb.firebaseio.com\";\n            const response = await fetch(`${dbUrl}/Matrimony/users.json?shallow=true`);\n\n            if (response.ok) {\n                const data = await response.json();\n                if (data) {\n                    const totalUsersCount = Object.keys(data).length;\n                    setTotalUsers(totalUsersCount);\n                    const estimated = Math.ceil(totalUsersCount / 100);\n                    setEstimatedTotalPages(estimated);\n                    sessionStorage.setItem(\"matrimony_estimated_pages\", estimated.toString());\n                    sessionStorage.setItem(\"matrimony_total_users\", totalUsersCount.toString());\n                    console.log(`Estimated total pages (Fast): ${estimated} (${totalUsersCount} users)`);\n                    return;\n                }\n            }\n\n            // Fallback to existing method if fetch fails\n            const db = getDatabase();\n            const snapshot = await get(ref(db, \"Matrimony/users\"));\n            if (snapshot.exists()) {\n                const totalUsersCount = Object.keys(snapshot.val()).length;\n                setTotalUsers(totalUsersCount);\n                const estimated = Math.ceil(totalUsersCount / 100);\n                setEstimatedTotalPages(estimated);\n                sessionStorage.setItem(\"matrimony_estimated_pages\", estimated.toString());\n                sessionStorage.setItem(\"matrimony_total_users\", totalUsersCount.toString());\n                console.log(`Estimated total pages (Fallback): ${estimated} (${totalUsersCount} users)`);\n            }\n        } catch (error) {\n            console.error(\"Error estimating total pages:\", error);\n        }\n    };\n\n    // Enhanced fetchUsers with better state management\n    // Enhanced fetchUsers with better state management\n    // Actually, I'll just change the function definition to use useCallback.\n    const fetchUsers = useCallback(async (startKey) => {\n        // Don't fetch if we're restoring state and already have users for the SAME page\n        const savedPage = parseInt(sessionStorage.getItem(\"matrimony_users_page\") || \"0\", 10);\n        if (isRestoringStateRef.current && users.length > 0 && currentPage === savedPage) {\n            console.log(\"Skipping fetch - restoring state with existing users for same page\");\n            setLoading(false);\n            setLoadingPage(null);\n            setSearchingPage(false);\n            return;\n        }\n\n        try {\n            setLoading(true);\n            console.log(\"Fetching users with startKey:\", startKey, \"for page:\", currentPage + 1);\n            const db = getDatabase();\n            const fetchLimit = 101;\n\n            let queryRef;\n            if (startKey) {\n                queryRef = query(\n                    ref(db, \"Matrimony/users\"),\n                    orderByKey(),\n                    startAfter(startKey),\n                    limitToFirst(fetchLimit)\n                );\n            } else {\n                queryRef = query(\n                    ref(db, \"Matrimony/users\"),\n                    orderByKey(),\n                    limitToFirst(fetchLimit)\n                );\n            }\n\n            const snapshot = await get(queryRef);\n            if (snapshot.exists()) {\n                const usersData = snapshot.val();\n                const userEntries = Object.entries(usersData);\n\n                setHasNextPage(userEntries.length > 100);\n\n                const displayUsers = userEntries.slice(0, 100);\n                // Removed redundant lastFetchedKey setting as it was unused\n\n                const pageUsers = displayUsers.map(([key, value]) => {\n                    const personal = value.personal || {};\n                    const educational = value.educational || {};\n                    const contact = value.contact || {};\n                    const fullName = [personal.firstName, personal.middleName, personal.lastName]\n                        .filter(Boolean)\n                        .join(\" \");\n                    const age = personal.dateOfBirth ? calculateAge(personal.dateOfBirth) : \"Not specified\";\n\n                    let photo = null;\n                    if (value.photos && Array.isArray(value.photos) && value.photos.length > 0) {\n                        const validPhotos = value.photos.filter(photoUrl =>\n                            photoUrl && typeof photoUrl === 'string' && isImageUrl(photoUrl)\n                        );\n                        if (validPhotos.length > 0) {\n                            photo = validPhotos[0];\n                        }\n                    }\n\n                    return {\n                        id: key,\n                        name: fullName || \"Unnamed User\",\n                        age,\n                        gender: personal.gender || \"Not specified\",\n                        location: educational.currentPlace || educational.district || educational.nativePlace || \"Not specified\",\n                        photo,\n                        phoneNumber: personal.phoneNumber || contact.callingNumber || key,\n                    };\n                });\n\n                if (currentPage === 0) {\n                    setUsers(pageUsers);\n                } else {\n                    setUsers(pageUsers);\n                }\n\n                // If we fetched a new page, update the pageKeys for the NEXT page\n                if (userEntries.length > 100) {\n                    const nextKey = userEntries[100][0];\n                    setPageKeys(prev => {\n                        const newKeys = [...prev];\n                        if (currentPage + 1 < newKeys.length) {\n                            newKeys[currentPage + 1] = nextKey;\n                        } else if (currentPage + 1 === newKeys.length) {\n                            newKeys.push(nextKey);\n                        }\n                        return newKeys;\n                    });\n                }\n            } else {\n                setUsers([]);\n                setHasNextPage(false);\n            }\n        } catch (error) {\n            console.error(\"Error fetching users:\", error);\n            setUsers([]);\n            setHasNextPage(false);\n        } finally {\n            setLoading(false);\n            setLoadingPage(null);\n            setSearchingPage(false);\n            isRestoringStateRef.current = false;\n        }\n    }, [currentPage, pageKeys, users.length]);\n\n    const discoverPagesBatch = async (targetPage) => {\n        if (isDiscoveringPages || targetPage < pageKeys.length) return pageKeys;\n\n        setIsDiscoveringPages(true);\n        const db = getDatabase();\n        let currentKey = pageKeys[pageKeys.length - 1];\n        let tempKeys = [...pageKeys];\n\n        try {\n            for (let i = pageKeys.length; i <= targetPage; i++) {\n                const queryRef = currentKey\n                    ? query(ref(db, \"Matrimony/users\"), orderByKey(), startAfter(currentKey), limitToFirst(100))\n                    : query(ref(db, \"Matrimony/users\"), orderByKey(), limitToFirst(100));\n\n                const snapshot = await get(queryRef);\n                if (snapshot.exists()) {\n                    const usersData = snapshot.val();\n                    const userEntries = Object.entries(usersData);\n                    if (userEntries.length > 0) {\n                        currentKey = userEntries[userEntries.length - 1][0];\n                        tempKeys.push(currentKey);\n                        setTotalPagesDiscovered(tempKeys.length);\n                    } else {\n                        break;\n                    }\n                } else {\n                    break;\n                }\n            }\n\n            setPageKeys(tempKeys);\n            localStorage.setItem(\"matrimony_users_pageKeys\", JSON.stringify(tempKeys));\n            sessionStorage.setItem(\"matrimony_users_pageKeys\", JSON.stringify(tempKeys));\n            return tempKeys;\n        } catch (error) {\n            console.error(\"Error discovering pages:\", error);\n            return pageKeys;\n        } finally {\n            setIsDiscoveringPages(false);\n        }\n    };\n\n    const isImageUrl = (url) => {\n        if (!url || typeof url !== 'string') return false;\n        const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.bmp', '.webp'];\n        const lowerUrl = url.toLowerCase();\n        return (lowerUrl.startsWith('http://') || lowerUrl.startsWith('https://')) &&\n            imageExtensions.some(ext => lowerUrl.includes(ext));\n    };\n\n    const calculateAge = (dob) => {\n        const today = new Date();\n        const birthDate = new Date(dob);\n        let age = today.getFullYear() - birthDate.getFullYear();\n        const m = today.getMonth() - birthDate.getMonth();\n        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n            age--;\n        }\n        return age;\n    };\n\n    // Enhanced handleViewDetails with comprehensive state preservation\n    const handleViewDetails = (id) => {\n        console.log(\"Navigating to user details:\", id);\n\n        // Save current scroll position\n        scrollPositionRef.current = window.scrollY;\n\n        // Save all necessary state to sessionStorage for immediate access\n        sessionStorage.setItem(\"matrimony_users_page\", currentPage.toString());\n        sessionStorage.setItem(\"matrimony_users_pageKeys\", JSON.stringify(pageKeys));\n        sessionStorage.setItem(\"matrimony_scroll_position\", scrollPositionRef.current.toString());\n        sessionStorage.setItem(\"matrimony_current_users\", JSON.stringify(users));\n        sessionStorage.setItem(\"matrimony_total_pages\", totalPagesDiscovered.toString());\n        if (estimatedTotalPages) {\n            sessionStorage.setItem(\"matrimony_estimated_pages\", estimatedTotalPages.toString());\n        }\n        sessionStorage.setItem(\"matrimony_returning_from_details\", \"true\");\n        sessionStorage.setItem(\"matrimony_navigated\", \"true\");\n\n        // Also save to localStorage for persistence\n        localStorage.setItem(\"matrimony_users_page\", currentPage.toString());\n        localStorage.setItem(\"matrimony_users_pageKeys\", JSON.stringify(pageKeys));\n        localStorage.setItem(\"matrimony_scroll_position\", scrollPositionRef.current.toString());\n\n        console.log(\"State saved, navigating to details page\");\n\n        // Navigate to details page\n        navigate(`/user/${id}`);\n    };\n\n    // NEW: Handle update photos navigation\n    const handleUpdatePhotos = (userId) => {\n        console.log(\"Navigating to update photos for user:\", userId);\n\n        // Save current scroll position\n        scrollPositionRef.current = window.scrollY;\n\n        // Save all necessary state to sessionStorage for immediate access\n        sessionStorage.setItem(\"matrimony_users_page\", currentPage.toString());\n        sessionStorage.setItem(\"matrimony_users_pageKeys\", JSON.stringify(pageKeys));\n        sessionStorage.setItem(\"matrimony_scroll_position\", scrollPositionRef.current.toString());\n        sessionStorage.setItem(\"matrimony_current_users\", JSON.stringify(users));\n        sessionStorage.setItem(\"matrimony_total_pages\", totalPagesDiscovered.toString());\n        if (estimatedTotalPages) {\n            sessionStorage.setItem(\"matrimony_estimated_pages\", estimatedTotalPages.toString());\n        }\n        sessionStorage.setItem(\"matrimony_returning_from_details\", \"true\");\n        sessionStorage.setItem(\"matrimony_navigated\", \"true\");\n\n        // Also save to localStorage for persistence\n        localStorage.setItem(\"matrimony_users_page\", currentPage.toString());\n        localStorage.setItem(\"matrimony_users_pageKeys\", JSON.stringify(pageKeys));\n        localStorage.setItem(\"matrimony_scroll_position\", scrollPositionRef.current.toString());\n\n        console.log(\"State saved, navigating to edit page\");\n\n        // Navigate to edit page\n        navigate(`/edit/${userId}`);\n    };\n\n    const handleDeleteUser = async (userId, userName) => {\n        if (window.confirm(`Are you sure you want to delete profile of \"${userName}\"? This action cannot be undone.`)) {\n            try {\n                setLoading(true);\n                const db = getDatabase();\n                await remove(ref(db, `Matrimony/users/${userId}`));\n\n                // Update local state\n                setUsers(prevUsers => prevUsers.filter(user => user.id !== userId));\n                setTotalUsers(prev => Math.max(0, prev - 1));\n\n                // User deleted successfully message removed as requested\n\n            } catch (error) {\n                console.error(\"Error deleting user:\", error);\n                alert(\"Failed to delete user. Please try again.\");\n            } finally {\n                setLoading(false);\n            }\n        }\n    };\n\n    const goToPage = async (targetPage) => {\n        if (targetPage === currentPage || targetPage < 0) return;\n\n        console.log(\"Going to page\", targetPage + 1);\n\n        setLoadingPage(targetPage);\n\n        // Clear restoration flag when manually navigating\n        isRestoringStateRef.current = false;\n\n        // Clear cached users to force fresh fetch\n        setUsers([]);\n\n        // Discover pages if needed\n        if (targetPage >= pageKeys.length) {\n            await discoverPagesBatch(targetPage);\n        }\n\n        setCurrentPage(targetPage);\n\n        if (!isRestoringStateRef.current) {\n            window.scrollTo({ top: 0, behavior: \"smooth\" });\n        }\n    };\n\n    const handleNextPage = () => {\n        if (hasNextPage) {\n            goToPage(currentPage + 1);\n        }\n    };\n\n    const handlePrevPage = () => {\n        if (currentPage > 0) {\n            goToPage(currentPage - 1);\n        }\n    };\n\n    // Enhanced page number generation with proper sliding window\n    const generatePageNumbers = () => {\n        const pages = [];\n        const totalKnown = Math.max(totalPagesDiscovered, estimatedTotalPages || 1);\n        const windowSize = isMobile ? 5 : 10;\n\n        let windowStart = Math.max(0, currentPage - Math.floor(windowSize / 2));\n        let windowEnd = windowStart + windowSize;\n\n        if (windowEnd > totalKnown) {\n            windowEnd = totalKnown;\n            windowStart = Math.max(0, windowEnd - windowSize);\n        }\n\n        if (windowStart > 0) {\n            pages.push(0);\n            if (windowStart > 1) {\n                pages.push('ellipsis-start');\n            }\n        }\n\n        for (let i = windowStart; i < windowEnd; i++) {\n            if (!pages.includes(i)) {\n                pages.push(i);\n            }\n        }\n\n        if (windowEnd < totalKnown) {\n            if (windowEnd < totalKnown - 1) {\n                pages.push('ellipsis-end');\n            }\n            for (let i = Math.max(windowEnd, totalKnown - 2); i < totalKnown; i++) {\n                if (!pages.includes(i)) {\n                    pages.push(i);\n                }\n            }\n        }\n\n        return pages;\n    };\n\n    const handlePageSearch = async () => {\n        const targetPage = parseInt(pageSearchValue, 10) - 1;\n        const maxPage = estimatedTotalPages || totalPagesDiscovered;\n\n        if (isNaN(targetPage) || targetPage < 0) {\n            alert(\"Please enter a valid page number\");\n            return;\n        }\n\n        if (targetPage >= maxPage) {\n            const shouldContinue = window.confirm(`Page ${pageSearchValue} might not exist. Current known range is 1-${maxPage}. Do you want to try anyway?`);\n            if (!shouldContinue) return;\n        }\n\n        setSearchingPage(true);\n        setPageSearchValue(\"\");\n\n        await goToPage(targetPage);\n    };\n\n    const handleImageError = (e) => {\n        e.target.style.display = 'none';\n        e.target.nextSibling.style.display = 'flex';\n    };\n\n    // Get appropriate loading message\n    const getLoadingMessage = () => {\n        if (isRestoringStateRef.current) {\n            return \"Γ£¿ Restoring your view...\";\n        }\n        if (searchingPage) {\n            return \"≡ƒöì Searching for page...\";\n        }\n        return \"≡ƒôè Loading profiles...\";\n    };\n\n    // Styles (keeping all your existing styles)\n    const pageStyle = {\n        padding: isMobile ? \"16px\" : isTablet ? \"24px\" : \"32px\",\n        background: \"linear-gradient(135deg, #c3dafe 0%, #e9d5ff 100%)\",\n        backgroundColor: \"#f8fafc\",\n        minHeight: \"100vh\",\n    };\n\n    const headerStyle = {\n        textAlign: \"left\",\n        margin: 0,\n        padding: isMobile ? \"12px 0\" : \"16px 0\",\n    };\n\n    const titleStyle = {\n        fontSize: isMobile ? \"1.5rem\" : isTablet ? \"1.8rem\" : \"2rem\",\n        fontWeight: \"800\",\n        color: \"#7c3aed\",\n        margin: 0,\n        lineHeight: 1.2,\n    };\n\n    const sloganStyle = {\n        fontSize: isMobile ? \"0.9rem\" : \"1rem\",\n        color: \"#475569\",\n        fontWeight: \"400\",\n        margin: \"4px 0 0 0\",\n    };\n\n    const listStyle = {\n        listStyleType: \"none\",\n        padding: 0,\n        display: \"grid\",\n        gridTemplateColumns: isMobile\n            ? \"1fr\"\n            : isTablet\n                ? \"repeat(auto-fill, minmax(260px, 1fr))\"\n                : \"repeat(auto-fill, minmax(300px, 1fr))\",\n        gap: isMobile ? \"12px\" : isTablet ? \"16px\" : \"24px\",\n    };\n\n    const userCardStyle = {\n        backgroundColor: \"#ffffff\",\n        borderRadius: \"16px\",\n        overflow: \"hidden\",\n        boxShadow: \"0 8px 24px rgba(0, 0, 0, 0.08)\",\n        transition: \"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        cursor: \"pointer\",\n        border: \"1px solid #d8b4fe\",\n    };\n\n\n\n    const userImageStyle = {\n        width: \"100%\",\n        height: isMobile ? \"200px\" : isTablet ? \"260px\" : \"300px\",\n        objectFit: \"cover\",\n        objectPosition: \"top\",\n        borderTopLeftRadius: \"16px\",\n        borderTopRightRadius: \"16px\",\n    };\n\n    const placeholderImageStyle = {\n        ...userImageStyle,\n        backgroundColor: \"#e5e7eb\",\n        color: \"#6b7280\",\n        display: \"none\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        fontSize: isMobile ? \"0.9rem\" : \"1rem\",\n        fontWeight: \"500\",\n    };\n\n    const userDetailsStyle = {\n        padding: isMobile ? \"12px\" : isTablet ? \"16px\" : \"20px\",\n        background: \"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        gap: \"6px\",\n        flex: 1,\n    };\n\n    const buttonStyle = {\n        padding: isMobile ? \"8px 14px\" : \"10px 18px\",\n        background: \"linear-gradient(90deg, #7c3aed 0%, #db2777 100%)\",\n        color: \"#ffffff\",\n        border: \"none\",\n        borderRadius: \"8px\",\n        fontWeight: \"600\",\n        fontSize: isMobile ? \"0.85rem\" : \"0.9rem\",\n        marginTop: \"10px\",\n        alignSelf: \"flex-start\",\n        transition: \"all 0.3s ease\",\n        cursor: \"pointer\",\n    };\n\n\n\n    // NEW: Style for Update Photos button\n    const updatePhotosButtonStyle = {\n        ...buttonStyle,\n        background: \"linear-gradient(90deg, #059669 0%, #047857 100%)\",\n        fontSize: isMobile ? \"0.8rem\" : \"0.85rem\",\n        padding: isMobile ? \"6px 12px\" : \"8px 14px\",\n        marginTop: \"6px\",\n    };\n\n\n\n    // NEW: Button container style for multiple buttons\n    const buttonContainerStyle = {\n        display: \"flex\",\n        flexDirection: isMobile ? \"column\" : \"row\",\n        flexWrap: \"wrap\",\n        gap: isMobile ? \"6px\" : \"8px\",\n        marginTop: \"10px\",\n    };\n\n    const deleteButtonStyle = {\n        ...buttonStyle,\n        background: \"linear-gradient(90deg, #ef4444 0%, #b91c1c 100%)\",\n        fontSize: isMobile ? \"0.8rem\" : \"0.85rem\",\n        padding: isMobile ? \"6px 12px\" : \"8px 14px\",\n        marginTop: isMobile ? \"4px\" : \"0\",\n    };\n\n\n\n    const paginationContainerStyle = {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        gap: isMobile ? \"4px\" : \"6px\",\n        margin: \"24px 0\",\n        flexWrap: \"wrap\",\n    };\n\n    const pageButtonStyle = {\n        padding: isMobile ? \"8px 12px\" : \"10px 14px\",\n        border: \"2px solid #e5e7eb\",\n        borderRadius: \"8px\",\n        backgroundColor: \"#ffffff\",\n        color: \"#374151\",\n        fontWeight: \"600\",\n        fontSize: isMobile ? \"0.85rem\" : \"0.9rem\",\n        cursor: \"pointer\",\n        transition: \"all 0.2s ease\",\n        minWidth: isMobile ? \"36px\" : \"40px\",\n        textAlign: \"center\",\n    };\n\n    const activePageButtonStyle = {\n        ...pageButtonStyle,\n        background: \"linear-gradient(90deg, #7c3aed 0%, #db2777 100%)\",\n        color: \"#ffffff\",\n        border: \"2px solid #7c3aed\",\n        transform: \"scale(1.1)\",\n        fontWeight: \"700\",\n    };\n\n    const disabledPageButtonStyle = {\n        ...pageButtonStyle,\n        opacity: 0.5,\n        cursor: \"not-allowed\",\n        backgroundColor: \"#f3f4f6\",\n    };\n\n    const loadingPageButtonStyle = {\n        ...pageButtonStyle,\n        background: \"linear-gradient(90deg, #f59e0b 0%, #f97316 100%)\",\n        color: \"#ffffff\",\n        border: \"2px solid #f59e0b\",\n    };\n\n    const ellipsisStyle = {\n        padding: isMobile ? \"8px 4px\" : \"10px 8px\",\n        color: \"#6b7280\",\n        fontWeight: \"600\",\n        fontSize: isMobile ? \"0.85rem\" : \"0.9rem\",\n        cursor: \"pointer\",\n        textAlign: \"center\",\n    };\n\n    const pageIndicatorStyle = {\n        textAlign: \"center\",\n        fontSize: isMobile ? \"0.85rem\" : \"0.95rem\",\n        color: \"#475569\",\n        margin: \"16px 0\",\n        fontWeight: \"500\",\n    };\n\n    const searchContainerStyle = {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        gap: \"12px\",\n        margin: \"16px 0\",\n        flexWrap: \"wrap\",\n    };\n\n    const searchInputStyle = {\n        padding: \"8px 12px\",\n        border: \"2px solid #e5e7eb\",\n        borderRadius: \"8px\",\n        fontSize: isMobile ? \"0.9rem\" : \"1rem\",\n        width: \"80px\",\n        textAlign: \"center\",\n        outline: \"none\",\n        transition: \"border-color 0.2s ease\",\n    };\n\n    const searchButtonStyle = {\n        ...buttonStyle,\n        padding: \"8px 16px\",\n        marginTop: 0,\n        alignSelf: \"auto\",\n    };\n\n    const progressDialogStyle = {\n        position: \"fixed\",\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        zIndex: 1000,\n    };\n\n    const progressContentStyle = {\n        backgroundColor: \"#ffffff\",\n        padding: \"24px\",\n        borderRadius: \"12px\",\n        textAlign: \"center\",\n        maxWidth: \"300px\",\n        width: \"90%\",\n    };\n\n    const restoringIndicatorStyle = {\n        textAlign: \"center\",\n        fontSize: isMobile ? \"0.85rem\" : \"0.9rem\",\n        color: \"#7c3aed\",\n        fontWeight: \"600\",\n        padding: \"8px 16px\",\n        backgroundColor: \"rgba(124, 58, 237, 0.1)\",\n        borderRadius: \"8px\",\n        margin: \"8px 0\",\n        border: \"1px solid rgba(124, 58, 237, 0.2)\",\n    };\n\n    const genderIcon = (gender) => {\n        if (gender.toLowerCase() === \"male\") return \"≡ƒæ¿\";\n        if (gender.toLowerCase() === \"female\") return \"≡ƒæ⌐\";\n        return \"≡ƒºæ\";\n    };\n\n\n    return (\n        <div style={pageStyle}>\n            {/* Progress Dialog */}\n            {(isDiscoveringPages || searchingPage || (loading && !isRestoringStateRef.current)) && (\n                <div style={progressDialogStyle}>\n                    <div style={progressContentStyle}>\n                        <div style={{ fontSize: \"1.2rem\", marginBottom: \"12px\", color: \"#1e293b\", fontWeight: \"700\" }}>\n                            {searchingPage ? \"≡ƒöì Searching Page...\" :\n                                isDiscoveringPages ? \"≡ƒôè Discovering Pages...\" :\n                                    \"ΓÅ│ Loading Profiles...\"}\n                        </div>\n                        <div style={{ color: \"#64748b\", marginBottom: \"20px\" }}>\n                            {searchingPage ? \"Loading your requested page\" :\n                                isDiscoveringPages ? \"Please wait while we find more pages\" :\n                                    `Fetching users for Page ${currentPage + 1}`}\n                        </div>\n                        <div className=\"spinner\" />\n                    </div>\n                </div>\n            )}\n\n            <div style={{ ...headerStyle, display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", flexWrap: \"wrap\", gap: \"10px\" }}>\n                <div>\n                    <h1 style={titleStyle}>MatchMaker Matrimony</h1>\n                    <p style={sloganStyle}>Discover your soulmate with love & compatibility</p>\n                </div>\n                {totalUsers > 0 && (\n                    <div style={{\n                        background: \"rgba(124, 58, 237, 0.1)\",\n                        padding: \"10px 20px\",\n                        borderRadius: \"12px\",\n                        border: \"1px solid rgba(124, 58, 237, 0.2)\",\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        gap: \"8px\"\n                    }}>\n                        <span style={{ fontSize: \"1.2rem\" }}>≡ƒæÑ</span>\n                        <div>\n                            <div style={{ fontSize: \"0.8rem\", color: \"#6d28d9\", fontWeight: \"600\", textTransform: \"uppercase\", letterSpacing: \"0.05em\" }}>Total Users</div>\n                            <div style={{ fontSize: \"1.2rem\", color: \"#7c3aed\", fontWeight: \"800\" }}>{totalUsers.toLocaleString()}</div>\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            <div style={pageIndicatorStyle}>\n                Page {currentPage + 1} of {estimatedTotalPages ? `~${estimatedTotalPages}` : `${totalPagesDiscovered}+`} ΓÇó Showing {users.length} profiles\n            </div>\n\n            {/* Page Search */}\n            <div style={searchContainerStyle}>\n                <span style={{ fontSize: isMobile ? \"0.9rem\" : \"1rem\", color: \"#475569\" }}>\n                    Jump to page:\n                </span>\n                <input\n                    type=\"number\"\n                    placeholder=\"Page #\"\n                    value={pageSearchValue}\n                    onChange={(e) => setPageSearchValue(e.target.value)}\n                    style={{\n                        ...searchInputStyle,\n                        borderColor: pageSearchValue ? \"#7c3aed\" : \"#e5e7eb\"\n                    }}\n                    onKeyPress={(e) => {\n                        if (e.key === 'Enter') {\n                            handlePageSearch();\n                        }\n                    }}\n                    min=\"1\"\n                    max={estimatedTotalPages || totalPagesDiscovered}\n                />\n                <button\n                    style={searchButtonStyle}\n                    onClick={handlePageSearch}\n                    disabled={!pageSearchValue || searchingPage}\n                >\n                    {searchingPage ? \"Searching...\" : \"Go\"}\n                </button>\n            </div>\n\n            {/* Show restoration indicator */}\n            {isRestoringStateRef.current && (\n                <div style={restoringIndicatorStyle}>\n                    Γ£¿ Restoring your previous view...\n                </div>\n            )}\n\n            {loading && !isRestoringStateRef.current ? (\n                <p style={{\n                    fontSize: isMobile ? \"0.9rem\" : \"1rem\",\n                    color: \"#475569\",\n                    textAlign: \"center\",\n                    padding: \"40px 0\"\n                }}>\n                    {getLoadingMessage()}\n                </p>\n            ) : users.length > 0 ? (\n                <>\n                    <ul style={listStyle}>\n                        {users.map((user) => (\n                            <li\n                                key={user.id}\n                                style={userCardStyle}\n                                className=\"user-card\"\n                            >\n                                {user.photo ? (\n                                    <>\n                                        <img\n                                            src={user.photo}\n                                            alt={user.name}\n                                            style={userImageStyle}\n                                            onError={handleImageError}\n                                        />\n                                        <div style={placeholderImageStyle}>\n                                            No Image\n                                        </div>\n                                    </>\n                                ) : (\n                                    <div style={{ ...placeholderImageStyle, display: 'flex' }}>\n                                        No Image\n                                    </div>\n                                )}\n                                <div style={userDetailsStyle}>\n                                    <div style={{\n                                        fontSize: isMobile ? \"1rem\" : isTablet ? \"1.1rem\" : \"1.2rem\",\n                                        fontWeight: \"700\",\n                                        color: \"#1e293b\"\n                                    }}>\n                                        {user.name}\n                                    </div>\n                                    <div style={{ fontSize: isMobile ? \"0.85rem\" : \"0.9rem\", color: \"#475569\" }}>\n                                        Age: {user.age}\n                                    </div>\n                                    <div style={{ fontSize: isMobile ? \"0.85rem\" : \"0.9rem\", color: \"#475569\" }}>\n                                        Gender: {genderIcon(user.gender)} {user.gender}\n                                    </div>\n                                    <div style={{ fontSize: isMobile ? \"0.85rem\" : \"0.9rem\", color: \"#475569\" }}>\n                                        ≡ƒôì {user.location}\n                                    </div>\n\n                                    {/* Updated button container with both buttons */}\n                                    <div style={buttonContainerStyle}>\n                                        <button\n                                            style={buttonStyle}\n                                            className=\"btn-view\"\n                                            data-type=\"view\"\n                                            onClick={() => handleViewDetails(user.id)}\n                                        >\n                                            ≡ƒæü∩╕Å View\n                                        </button>\n                                        <button\n                                            style={updatePhotosButtonStyle}\n                                            className=\"btn-update\"\n                                            data-type=\"update\"\n                                            onClick={(e) => {\n                                                e.stopPropagation(); // Prevent card click\n                                                handleUpdatePhotos(user.id);\n                                            }}\n                                        >\n                                            ≡ƒô╕ Update\n                                        </button>\n                                        <button\n                                            style={deleteButtonStyle}\n                                            className=\"btn-delete\"\n                                            data-type=\"delete\"\n                                            onClick={(e) => {\n                                                e.stopPropagation(); // Prevent card click\n                                                handleDeleteUser(user.id, user.name);\n                                            }}\n                                        >\n                                            ≡ƒùæ∩╕Å Delete\n                                        </button>\n                                    </div>\n                                </div>\n                            </li>\n                        ))}\n                    </ul>\n\n                    {/* Enhanced Sliding Window Pagination */}\n                    <div style={paginationContainerStyle}>\n                        <button\n                            style={currentPage === 0 ? disabledPageButtonStyle : pageButtonStyle}\n                            onClick={handlePrevPage}\n                            disabled={currentPage === 0}\n                        >\n                            ΓåÉ Prev\n                        </button>\n\n                        {generatePageNumbers().map((page, index) => {\n                            if (page === 'ellipsis-start') {\n                                return (\n                                    <span\n                                        key={`ellipsis-start-${index}`}\n                                        style={ellipsisStyle}\n                                        onClick={() => goToPage(Math.max(0, currentPage - 10))}\n                                        title=\"Go back 10 pages\"\n                                    >\n                                        ...\n                                    </span>\n                                );\n                            }\n\n                            if (page === 'ellipsis-end') {\n                                return (\n                                    <span\n                                        key={`ellipsis-end-${index}`}\n                                        style={ellipsisStyle}\n                                        onClick={() => goToPage(Math.min(currentPage + 10, (estimatedTotalPages || totalPagesDiscovered) - 1))}\n                                        title=\"Go forward 10 pages\"\n                                    >\n                                        ...\n                                    </span>\n                                );\n                            }\n\n                            const isCurrentPage = page === currentPage;\n                            const isLoadingPage = loadingPage === page;\n\n                            return (\n                                <button\n                                    key={page}\n                                    style={\n                                        isLoadingPage\n                                            ? loadingPageButtonStyle\n                                            : isCurrentPage\n                                                ? activePageButtonStyle\n                                                : pageButtonStyle\n                                    }\n                                    onClick={() => goToPage(page)}\n                                    disabled={isLoadingPage}\n                                    title={`Go to page ${page + 1}`}\n                                >\n                                    {isLoadingPage ? \"...\" : page + 1}\n                                </button>\n                            );\n                        })}\n\n                        <button\n                            style={!hasNextPage ? disabledPageButtonStyle : pageButtonStyle}\n                            onClick={handleNextPage}\n                            disabled={!hasNextPage}\n                        >\n                            Next ΓåÆ\n                        </button>\n                    </div>\n                </>\n            ) : (\n                <p style={{\n                    fontSize: isMobile ? \"0.9rem\" : \"1rem\",\n                    color: \"#475569\",\n                    textAlign: \"center\",\n                    padding: \"40px 0\"\n                }}>\n                    No profiles found.\n                </p>\n            )}\n        </div>\n    );\n}\n\nexport default HomePage;\n","usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\components\\pages\\MatchesPage.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\components\\pages\\MessagesPage.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\components\\pages\\PrivacyPolicy.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\components\\pages\\ProfilePage.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\components\\pages\\Register.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\components\\pages\\RegistrationForm.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\components\\pages\\SettingsPage.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\components\\pages\\UserDetail.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\components\\pages\\UserLogin.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\firebaseConfig.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\reportWebVitals.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]},{"filePath":"D:\\ongoing itpl\\matrimonyweb-main (1)\\matrimonyweb-main\\src\\setupTests.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"dot-location","replacedBy":[]},{"ruleId":"new-parens","replacedBy":[]},{"ruleId":"no-mixed-operators","replacedBy":[]},{"ruleId":"no-new-object","replacedBy":["no-object-constructor"]},{"ruleId":"no-whitespace-before-property","replacedBy":[]},{"ruleId":"rest-spread-spacing","replacedBy":[]}]}]
